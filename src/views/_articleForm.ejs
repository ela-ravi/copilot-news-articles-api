<form id="article-form" action="<%= formAction %>" method="POST" enctype="application/x-www-form-urlencoded">
  <input type="hidden" id="articleId" name="articleId" value="<%= article ? article._id : '' %>">

  <div class="form-group">
    <label for="title">Title</label>
    <input type="text" class="form-control" id="title" name="title" value="<%= article ? article.title : '' %>" required>
  </div>

  <div class="form-group">
    <label for="subtitle">Subtitle</label>
    <input type="text" class="form-control" id="subtitle" name="subtitle" value="<%= article ? article.subtitle : '' %>" required>
  </div>

  <div class="form-group">
    <label for="author">Author</label>
    <select class="form-control" id="author" name="author" required>
      <% authors.forEach(author => { %>
      <option value="<%= author.authorId %>" <%= article && article.author.authorId === author.authorId ? 'selected' : '' %>>
        <%= author.authorName %>
      </option>
      <% }) %>
    </select>
  </div>

  <div class="form-group">
    <label for="category">Category</label>
    <select class="form-control" id="category" name="category" required>
      <% categories.forEach(category => { %>
      <option value="<%= category.categoryId %>" <%= article && article.category.categoryId === category.categoryId ? 'selected' : '' %>>
        <%= category.categoryName %>
      </option>
      <% }) %>
    </select>
  </div>

  <!-- Replace the old tags input with the new tag management system -->
  <%- include('_tagManagement') %>

  <div class="form-group">
    <label for="hero">Hero Image URL</label>
    <input type="url" class="form-control" id="hero" name="hero" value="<%= article ? article.hero : '' %>" required>
  </div>

  <div class="form-group">
    <label for="description">Description</label>
    <textarea class="form-control" id="description" name="description" required><%= article ? article.description : '' %></textarea>
  </div>

  <button type="submit" class="btn btn-primary"><%= submitButtonText %></button>
  <% if (showPublishButton) { %>
  <button type="button" class="btn btn-success" id="publish-button">Publish</button>
  <% } %>
  <% if (showCancelButton) { %>
  <a href="/" class="btn btn-secondary">Cancel</a>
  <% } %>
</form>